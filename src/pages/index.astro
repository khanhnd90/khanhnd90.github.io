---
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import Header from '../components/Header.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../consts';
import { getCollection } from 'astro:content';
import FormattedDate from '../components/FormattedDate.astro';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body>
		<Header />
		<main>
			<h1>ðŸ‘‹ Hello, I'm Khanh</h1>
			<p>
				I'm an Engineering Manager and Technical Leader based in Ho Chi Minh City, specializing in Ruby on Rails. 
				Currently leading technical teams at Raksul, where I drive engineering initiatives and build scalable solutions.
			</p>
			<p>
				I write about software engineering, technology leadership, and my explorations in emerging technologies. 
				When I'm not coding or managing teams, you'll find me reading, enjoying cinema, or diving into new tech trends.
			</p>
			
			<section style="margin-top: 3rem;">
				<h2>Recent Posts</h2>
				<ul style="list-style: none; padding: 0;">
					{
						posts.map((post) => (
							<li style="margin-bottom: 1.5rem;">
								<a href={`/blog/${post.id}/`}>
									<h3 style="margin: 0;">{post.data.title}</h3>
								</a>
								<p style="color: #666; margin: 0.25rem 0;">
									<FormattedDate date={post.data.pubDate} />
								</p>
								{post.data.description && (
									<p style="margin: 0.5rem 0 0 0;">{post.data.description}</p>
								)}
							</li>
						))
					}
				</ul>
				<p>
					<a href="/blog">View all posts â†’</a>
				</p>
			</section>
		</main>
		<Footer />
	</body>
</html>
